{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="{% static 'bootstrap-5.3.3-dist/css/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'css/main-style.css' %}">
</head>
<body>

{% include 'catalog/catalog_navbar.html' %}

<div class="catalog-page-container">
    <div class="container border rounded align-content-center">
        <h1 class="text-center">Integrity Check</h1>
        <p class="text-center">This page allows you to check if all the movies in this catalog are not broken or
            corrupted.
            To start the check press the button below.</p>

        <div class="row justify-content-center">
            <button class="col-auto btn btn-primary " type="button" onclick="startHashCheck({{ movies }})">START THE CHECK</button>
        </div>

    </div>
</div>

<script>
    function startHashCheck(movies) {
        for (let i = 0; i < movies.length; i++) {
            let movie_id = movies[i];

            let xhttp = new XMLHttpRequest();
            xhttp.onload = function (r) {
                console.log(r)
            }
            xhttp.open('GET', '/catalog/check_movie_hash/' + movie_id)
            xhttp.send()
        }
    }
</script>
</body>
</html>